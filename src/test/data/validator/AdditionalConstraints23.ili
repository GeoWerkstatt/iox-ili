INTERLIS 2.3;

CONTRACTED MODEL AdditionalConstraints23 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  TOPIC Bodenbedeckung =
  	DOMAIN
		Lkoord = COORD 480000.000 .. 850000.000 [INTERLIS.m],
					   70000.000 .. 310000.000 [INTERLIS.m],
					ROTATION 2 -> 1;
		Hkoord = COORD 480000.000 .. 850000.000 [INTERLIS.m],
					        70000.000 .. 310000.000 [INTERLIS.m],
					              0.000 .. 5000.000 [INTERLIS.m];
			enumerationOrdered = (null, eins, zwei, drei, mehr (vier)) ORDERED;
			attrRef1 = TEXT*12;
		
	CLASS Gebaeude =
		attr1 : 0..10; !!5
		attr2 : 0..10;
  	END Gebaeude;
  	
	CLASS Bank =
		attr3 : Hkoord;
		attr4 : Hkoord;
	END Bank;
	
    CLASS ClassZA =
		Geometrie : SURFACE WITH (STRAIGHTS,ARCS) VERTEX Lkoord WITHOUT OVERLAPS > 0.001;
	END ClassZA;
	
	STRUCTURE StructC =
	END StructC;
	
	CLASS ClassC =
		Numbers: BAG {1..*} OF StructC;
	END ClassC;
  	
  	CLASS ClassA =
		attr1 : TEXT*10;
		attr2 : 0 .. 100;
	END ClassA;
	
	CLASS ConditionClass =
		attr1 : TEXT*10;
	END ConditionClass;
	
	CLASS ClassE =
		attr5 : TEXT*10;
		attr2 : 0 .. 100;
	END ClassE;
  	
  END Bodenbedeckung;
END AdditionalConstraints23.


CONTRACTED MODEL AdditionalConstraints23Zusatz AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
    VIEW IndustrieGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.Gebaeude;
    	WHERE Gebaeude->attr1==5;
    	=
        ALL OF Gebaeude;
        MANDATORY CONSTRAINT attr1 == attr2;
    END IndustrieGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz.


CONTRACTED MODEL AdditionalConstraints23Zusatz2 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
        VIEW PrivatGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.Bank;
    	=
        ALL OF Bank;
        MANDATORY CONSTRAINT (attr3 != attr4);
    END PrivatGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz2.


CONTRACTED MODEL AdditionalConstraints23Zusatz3 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
        VIEW PrivatGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.ClassZA;
    	=
        ALL OF ClassZA;
        MANDATORY CONSTRAINT INTERLIS.areAreas(ALL, UNDEFINED, >> Geometrie);
    END PrivatGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz3.

CONTRACTED MODEL AdditionalConstraints23Zusatz4 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
        VIEW PrivatGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.ClassC;
    	=
        ALL OF ClassC;
        SET CONSTRAINT INTERLIS.objectCount(Numbers) == 2;
    END PrivatGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz4.

CONTRACTED MODEL AdditionalConstraints23Zusatz5 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
        VIEW PrivatGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.ClassA;
    	=
        ALL OF ClassA;
        UNIQUE attr1;
    END PrivatGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz5.

CONTRACTED MODEL AdditionalConstraints23Zusatz6 AT "mailto:ceis@localhost" VERSION "2016-03-29" =
  IMPORTS AdditionalConstraints23;
  VIEW TOPIC BodenbedeckungZusatz =
  	DEPENDS ON AdditionalConstraints23.Bodenbedeckung;
        VIEW PrivatGebaeude
    	PROJECTION OF AdditionalConstraints23.Bodenbedeckung.ClassE;
    	=
        ALL OF ClassE;
        EXISTENCE CONSTRAINT attr5 REQUIRED IN AdditionalConstraints23.Bodenbedeckung.ConditionClass : attr1;
    END PrivatGebaeude;
  END BodenbedeckungZusatz;
END AdditionalConstraints23Zusatz6.